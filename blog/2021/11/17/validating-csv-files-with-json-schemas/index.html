<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Schematix RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Schematix Atom Feed"><title data-react-helmet="true">Validating CSV files using JSON Schemas | Schematix</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.schematix.net//blog/2021/11/17/validating-csv-files-with-json-schemas"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Validating CSV files using JSON Schemas | Schematix"><meta data-react-helmet="true" name="description" content="CSV files are an often used medium for transferring data between systems. Be it medical data, financial data, or"><meta data-react-helmet="true" property="og:description" content="CSV files are an often used medium for transferring data between systems. Be it medical data, financial data, or"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-11-17T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/schematix-net"><meta data-react-helmet="true" property="article:tag" content="validation,csv,json schema"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://www.schematix.net//blog/2021/11/17/validating-csv-files-with-json-schemas"><link data-react-helmet="true" rel="alternate" href="https://www.schematix.net//blog/2021/11/17/validating-csv-files-with-json-schemas" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.schematix.net//blog/2021/11/17/validating-csv-files-with-json-schemas" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.14368b0d.css">
<link rel="preload" href="/assets/js/runtime~main.079e859b.js" as="script">
<link rel="preload" href="/assets/js/main.d7f4ec73.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Schematix Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.svg" alt="Schematix Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Schematix</b></a><a class="navbar__item navbar__link" href="/docs/getting_started/overview">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/schematix-net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/blog/2021/11/17/validating-csv-files-with-json-schemas">Validating CSV files using JSON Schemas</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2019/05/30/welcome">Welcome</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2019/05/29/hello-world">Hello</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2019/05/28/hola">Hola</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">Validating CSV files using JSON Schemas</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2021-11-17T00:00:00.000Z" itemprop="datePublished">November 17, 2021</time> Â· <!-- -->4 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/schematix-net" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars.githubusercontent.com/u/56183148?v=4" alt="Erik Pragt"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/schematix-net" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Erik Pragt</span></a></div><small class="avatar__subtitle" itemprop="description">Schematix Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>CSV files are an often used medium for transferring data between systems. Be it medical data, financial data, or
any other type of data, CSV files are often the exit or entry point of any IT system. But whenever the data
gets ingested, what options do we have to verify the validity of our data? This blogpost dives in how to validate
CSV data using standard JSON Schemas.</p><p>JSON Schemas, as the name implies, are schemas used to validate JSON structures. However, CSV files (with a bit of
imagination) can resemble JSON structures quite well, and as such, a combination of CSV files and JSON Schemas seems
a straightforward one. </p><p>JSON Schemas offer a wide range of validation options. For instance, JSON Schemas offer data types, such as Strings,
Numbers, and Booleans as standard data types. Besides that, there are a wide range of validation options, ranging
from length checking, maximum values, to more complex validations of using Regular Expressions or custom datatypes.
All in all, JSON Schemas offer a very complete set of validations to validate most data.</p><h3 id="generate-random-data">Generate random data</h3><p>To validate data, we start by defining a Schema. An easy way to create a Schema is by using <code>schematix init</code>, which
we can invoke by using the following command:</p><pre><code>docker run -ti schematix/cli:latest init
</code></pre><p>This will generate a starting point for our Schema, and highlights some of the options Schematix provides. To make
things a bit simpler, we limit the schema to only 3 properties, like this:</p><pre><code class="language-json">{
  &quot;$schema&quot; : &quot;http://json-schema.org/draft-07/schema#&quot;,
  &quot;$id&quot; : &quot;https://schema.schematix.net/data-gen/simple_types.json&quot;,
  &quot;type&quot; : &quot;object&quot;,
  &quot;title&quot; : &quot;Initializer template&quot;,
  &quot;description&quot; : &quot;Initializer example template&quot;,
  &quot;properties&quot; : {
    &quot;author&quot; : {
      &quot;type&quot; : &quot;string&quot;
    },
    &quot;book title&quot; : {
      &quot;type&quot; : &quot;string&quot;
    },
    &quot;isbn10&quot; : {
      &quot;type&quot; : &quot;string&quot;,
      &quot;maxLength&quot; : 10
    }
  },
  &quot;required&quot; : [ &quot;author&quot; ]
}
</code></pre><p>So, now we have a simple JSON Schema which we can use to validate some input data.
Save the above file to a file named <code>book.schema.json</code></p><p>We could create some data to validate by hand, but it&#x27;s easier to have Schematix validate a few records for us.
We can do so using the <code>generate-data</code> command, like this:</p><pre><code>docker run -ti -v ${PWD}:/tmp schematix/cli generate-data /tmp/book.schema.json --output=/tmp/books.csv
</code></pre><p>This will produce the following result:</p><table><thead><tr><th>author</th><th>book title</th><th>isbn10</th></tr></thead><tbody><tr><td>Shelli Kreiger</td><td>A Catskill Eagle</td><td>0733564410</td></tr><tr><td>Kling Group</td><td>Blue Remembered Earth</td><td>1595015485</td></tr><tr><td>&quot;Funk, Hirthe and Daniel&quot;</td><td>Ring of Bright Water</td><td>0473680718</td></tr><tr><td>&quot;Buckridge, Padberg and Abernathy&quot;</td><td>Little Hands Clapping</td><td>165077253X</td></tr><tr><td>Eugena Stiedemann</td><td>FranÃ§oise Sagan</td><td>0985914041</td></tr><tr><td>Tami Carroll MD</td><td>Nine Coaches Waiting</td><td>196552673X</td></tr><tr><td>&quot;Swaniawski, Stiedemann and Boehm&quot;</td><td>Frequent Hearses</td><td>1726121577</td></tr><tr><td>Altenwerth-Champlin</td><td>Tender Is the Night</td><td>1337231479</td></tr><tr><td>Mr. Gaye Russel</td><td>Consider Phlebas</td><td>0033802831</td></tr><tr><td>Dr. Zonia DuBuque</td><td>The Mirror Crack&#x27;d from Side to Side</td><td>1650263562</td></tr></tbody></table><p>As you can see in the data above, the generated data isn&#x27;t some random string. Schematix comes
with many natural text generators, and attempts to find a suitable match based on the heurisics
in the schema. This makes working with data far more pleasant than just generating a text like
<code>pXOOqbkqzk</code>. The posibilities of generating random data go far beyond this basic example, but it
gives bit of an indication of what&#x27;s possible.</p><h3 id="validating-csv-data">Validating CSV data</h3><p>Now, the last part of our setup is to actually start validating the CSV data. If we would validate
the data as is, there wouldn&#x27;t be any validation errors, since Schematix attempts to generate
only valid data, unless instructed otherwise. So, let&#x27;s manually change some of the data.</p><p>When looking at the schema, we see that we have a maxmum length for the ISBN 10 identifier. We
can put an invalid value in the data by exceeding the length of 10, so let&#x27;s do that, and change the
last number in the CSV file like this:</p><table><thead><tr><th>author</th><th>book title</th><th>isbn10</th></tr></thead><tbody><tr><td>Dr. Zonia DuBuque</td><td>The Mirror Crack&#x27;d from Side to Side</td><td>1650263562<strong>XXX</strong></td></tr></tbody></table><p>Now that we have invalid data in the CSV file, let&#x27;s validate it. You can do so with the following command,
which is very similar to the command to generate data:</p><pre><code>docker run -ti -v ${PWD}:/tmp schematix/cli validate  /tmp/books.csv /tmp/book.schema.json --header=1
</code></pre><p>Note that we&#x27;re supplying <code>header=1</code> parameter, to skip the first line of the CSV file, which contains the header.</p><p>The validation result will now look like this:</p><pre><code>Validation FAILED with 1 error:
- line 20:&lt;isbn10&gt; String length 13 is greater than maxLength 10
</code></pre><p>And we&#x27;ve validated our first CSV file using a JSON Schema!</p><h2 id="conclusion">Conclusion</h2><p>The above gave a small introduction in how to improve the quality of data coming out or going into
a system by providing the option to easily validate the data. If you need to know more,
please <a href="/docs/getting_started/overview">check out the documentation</a>, or contact us!</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/validation">validation</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/csv">csv</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/json-schema">json schema</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2019/05/30/welcome"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Welcome<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#generate-random-data" class="table-of-contents__link toc-highlight">Generate random data</a></li><li><a href="#validating-csv-data" class="table-of-contents__link toc-highlight">Validating CSV data</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting_started/overview">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/modules/validation">Validation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/modules/data-generation">Data Generation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/modules/documentation">Documentation Generation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/schematix" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://hub.docker.com/u/schematix" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Docker Hub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://reddit.com/r/schematix/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/schematix-net" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/schematixnet" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Schematix, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.079e859b.js"></script>
<script src="/assets/js/main.d7f4ec73.js"></script>
</body>
</html>